% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/patch_table.R
\name{patch_table}
\alias{patch_table}
\title{Patch a Table}
\usage{
patch_table(x, y, by, sentinel = "DELETE")
}
\arguments{
\item{x}{The data frame to be updated.}

\item{y}{The data frame containing the patches.}

\item{by}{A character vector of variables to join by (e.g. "ITEM_NAME" for
varinfo tables)}

\item{sentinel}{String used to force an NA (default "DELETE").}
}
\value{
A data frame with patched values and synchronized columns.
}
\description{
Selectively updates a data frame (x) with values from a patch data frame (y).
If a cell in the patch is NA, the original value in x is preserved.
A sentinel value can be used to force an NA.
}
\examples{
# 1. Setup a varinfo table
main_df <- data.frame(
  ITEM_NAME = c("AGE", "GENDER", "OLD_VAR"),
  label = c("Respondent Age", "Gender", "To be deleted"),
  DASH_DISPLAY = c("TRUE", "FALSE", "TRUE"),
  stringsAsFactors = FALSE
)

# 2. Setup a "patch" table
# - GENDER: We want to update DASH_DISPLAY, but leave the label alone (NA)
# - OLD_VAR: We want to force the label to be NA using the sentinel
# - NEW_VAR: This is a brand new variable not in main_df
patch_df <- data.frame(
  ITEM_NAME = c("GENDER", "OLD_VAR", "NEW_VAR"),
  label = c(NA, "DELETE", "Brand New Variable"),
  DASH_DISPLAY = c("TRUE", NA, "FALSE"),
  stringsAsFactors = FALSE
)

# 3. Run the patch
updated_df <- patch_table(main_df, patch_df, by = "ITEM_NAME", sentinel = "DELETE")

# View results
print(updated_df)
}
