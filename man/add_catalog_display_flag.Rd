% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_catalog_display_flag.R
\name{add_catalog_display_flag}
\alias{add_catalog_display_flag}
\title{Flag Variables for Survey Question Catalog Display}
\usage{
add_catalog_display_flag(df, admin_to_include = NULL, overwrite = FALSE)
}
\arguments{
\item{df}{The varinfo data frame.}

\item{admin_to_include}{Optional vector of admin IDs to include
(e.g., c( "2024", "2025")). If provided, variables must appear in at least
one of these admins to be flagged as TRUE.}

\item{overwrite}{Logical. If TRUE, resets all flags. If FALSE (default),
preserves existing TRUE/FALSE flags for existing items.}
}
\value{
A data frame with a boolean 'CATALOG_DISPLAY' column.
}
\description{
Applies logic to determine if a variable should be displayed
in the survey question catalog. It excludes metadata and administrative types,
with the option to exclude questions that were not asked after a given year.
Uses \code{AllSurveyAdmin} column from \code{update_survey_admin_summaries}.
}
\examples{
# 1. Create a sample varinfo table
varinfo_df <- data.frame(
  ITEM_NAME = c("AGE", "GENDER", "ADMIN_NOTE", "OLD_Q", "MANUAL_KEEP"),
  ITEM_TYPE = c("Question", "Question", "administrative", "Question", "Question"),
  AllSurveyAdmin = c("2024, 2025", "2025", "2025", "2021, 2022", "2021"),
  CATALOG_DISPLAY = c(NA, NA, NA, NA, TRUE), # MANUAL_KEEP already has a flag
  stringsAsFactors = FALSE
)

# 2. Run with a filter for 2024 and 2025
# This should keep AGE and GENDER, but drop OLD_Q (since 2021/2022 aren't in the list)
# It should also drop ADMIN_NOTE (hard rule) and keep MANUAL_KEEP (preservation)
catalog_df <- add_catalog_display_flag(
  varinfo_df,
  admin_to_include = c("2024", "2025"),
  overwrite = FALSE
)

print(catalog_df)
}
\seealso{
Other varinfo prep functions: 
\code{\link{add_dash_display_flag}()},
\code{\link{add_label_metadata}()},
\code{\link{check_and_export_unmatched}()},
\code{\link{get_dashboard_varinfo}()},
\code{\link{join_varinfo}()},
\code{\link{load_survey_column_info}()},
\code{\link{sort_varinfo}()},
\code{\link{sync_column_schema}()},
\code{\link{update_survey_admin_summaries}()}
}
\concept{varinfo prep functions}
