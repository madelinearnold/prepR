% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pivot_responses_longer.R
\name{pivot_responses_longer}
\alias{pivot_responses_longer}
\title{Expand Survey Data to One Row per Response per Variable}
\usage{
pivot_responses_longer(data, variables_to_pivot)
}
\arguments{
\item{data}{A data frame or tibble with one row per respondent.}

\item{variables_to_pivot}{A character vector of column names to reshape into long format.}
}
\value{
A tibble with one row per respondent per variable, including:
\itemize{
\item \code{rowid}: a unique ID per respondent
\item \code{ITEM_NAME}: the name of the original variable
\item \code{response}: the corresponding character response
}
}
\description{
Converts a respondent-level wide-format data frame into a long-format
data frame, where each row represents a single response to a single survey
variable/item. This is helpful for downstream question-level summarization.
}
\details{
The function uses \code{any_of()} when selecting columns to transform and reshape,
which makes it tolerant of missing variables in \code{variables_to_pivot}. This is
especially useful when working with survey data and variable lists that may
differ slightly in column composition (e.g. by year or intended audience).
}
\examples{
# attach required libraries
library(dplyr)
library(tibble)
library(tidyr)

sample_data <- tibble::tibble(
  q1 = c("Yes", "No", NA),
  q2 = c("A", "B", "C"),
  q3 = c(1, 2, NA)
)
pivot_responses_longer(sample_data, variables_to_pivot = c("q1", "q2", "q3"))

}
