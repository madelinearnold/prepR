% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/update_survey_admin_summaries.R
\name{update_survey_admin_summaries}
\alias{update_survey_admin_summaries}
\title{Update Survey Administration Summary Columns}
\usage{
update_survey_admin_summaries(
  df,
  admin_prefix = "QualtricsVariableName.",
  recency_order = NULL
)
}
\arguments{
\item{df}{The varinfo data frame.}

\item{admin_prefix}{A character string representing the prefix used for
administration-specific columns. Include any trailing separator
(like a dot or underscore). Defaults to "QualtricsVariableName.".}

\item{recency_order}{Optional vector of admin IDs in the desired order
(most recent first). If \code{NULL} (default), the function extracts digits
from the admin suffixes and sorts them in descending numeric order.
Especially helpful when admin IDs contain characters (e.g. Sp25).}
}
\description{
Identifies columns in the varinfo matching a specific prefix (e.g.,
"QualtricsVariableName.") and uses them to determine which survey
administrations a variable appeared in.
}
\details{
Looks for columns in the varinfo with the pattern \code{admin_prefix} followed by
an admin ID (the survey administration year, semester, or other date id).
Admin IDs can also be supplied as a vector in recency order. If a given
variable (row in the varinfo) is not NA for a column, we assume that question
was asked in that survey administration. The function generates two new
columns:
\enumerate{
\item \code{AllSurveyAdmin} A comma-separated string of all admin IDs where
the variable was present, sorted by recency.
\item \code{MostRecentSurveyAdmin} The single most recent admin ID.
}
}
\examples{
test_df <- tibble::tibble(
  ITEM_NAME = c("Q1", "Q2"),
  QualtricsVariableName.2024 = c("Q1", NA),
  QualtricsVariableName.2025 = c("Q1", "Q2")
)

update_survey_admin_summaries(test_df, recency_order = c("2025", "2024"))
}
\seealso{
Other varinfo prep functions: 
\code{\link{add_catalog_display_flag}()},
\code{\link{add_dash_display_flag}()},
\code{\link{add_label_metadata}()},
\code{\link{check_and_export_unmatched}()},
\code{\link{get_catalog_varinfo}()},
\code{\link{get_dashboard_varinfo}()},
\code{\link{join_varinfo}()},
\code{\link{load_survey_column_info}()},
\code{\link{sort_varinfo}()},
\code{\link{sync_column_schema}()}
}
\concept{varinfo prep functions}
